一、简谱乐理介绍（小白版）
1. 什么是简谱？
简谱是一种用数字表示音乐的记谱法。它用简单的数字和符号来表示音高和节奏，非常适合初学者学习音乐。
2. 简谱的基本规则
音高表示：
数字 1 到 7 分别表示音阶中的 Do、Re、Mi、Fa、Sol、La、Si。
高低音通过符号 ↑ 和 ↓ 表示：
↑ 表示高音，例如 1↑ 表示高八度的 Do。
↓ 表示低音，例如 1↓ 表示低八度的 Do。
时值表示：
普通音符：数字本身表示一拍。
长音符：使用 — 表示两拍，例如 1—。
半长音符：使用 - 表示一拍半，例如 1-。
小节线：
使用 | 分隔小节，例如 1 2 3 4 | 5 6 7 1。
休止符：
使用 0 表示休止符，例如 0 表示一拍休止。
3. 示例
简谱示例：
- 1=C 表示调号为 C 大调。
4/4 表示每小节有四拍。
1 2 3 4 表示音符 Do、Re、Mi、Fa。
5— 表示音符 Sol 持续两拍。
· 表示无歌词部分。
---
二、代码功能介绍（小白版）
1. score_generator.py 的功能
这个文件的主要任务是从音频中提取音高和节奏信息，然后生成简谱。
核心方法：
_quantize_pitch(pitch: float)：
将音高量化为简谱音符。
例如，将音高 0.3 转换为 1，1.5 转换为 2。
_quantize_duration(duration: float)：
将时长量化为简谱时值。
例如，将时长 1.2 转换为 —，0.6 转换为 -。
generate_score(features: Dict)：
根据音高、节拍和时间戳生成简谱。
例如，输入音高序列 [0, 1, 2, 3] 和节拍 [1, 1, 1, 1]，输出简谱 1 2 3 4 |。
技术细节：
使用 librosa 库提取音频特征。
支持高低音标记和时值符号的生成。
模块化设计，便于扩展和维护。
2. lyrics_sync.py 的功能
这个文件的主要任务是将歌词与简谱同步。
核心方法：
extract_lyrics(audio_path: str)：
从音频文件中提取歌词和时间戳。
例如，输入音频文件 example.mp3，输出歌词 [('我', 0.5), ('爱', 1.0), ('你', 1.5)]。
sync_lyrics(score: str, lyrics: str, bpm: int, time_signature: str)：
根据 BPM 和节拍将歌词与简谱同步。
例如，输入简谱 1 2 3 4 和歌词 我 爱 你 中，输出同步后的简谱和歌词。
技术细节：
使用 pydub 和 speech_recognition 库处理音频和识别歌词。
支持高低音、时值符号和休止符的解析。
根据 BPM 动态计算每拍时间，确保歌词和音符的时间戳精确对齐。
---
三、项目进度介绍
已完成功能：
音频文件上传与导入。
音高、节拍和时间戳的提取。
简谱生成与歌词同步。
带歌词的简谱输出。
待完成功能：
简谱编辑功能（修改音符、添加注释）。
简谱分享功能（支持微信、QQ、电子邮件等平台）。
个性化设置（字体大小、颜色、播放模式）。
3. 测试进度：
已完成 test_Lyrics_sync.py 的单元测试，覆盖了歌词同步的核心逻辑。
待完成简谱生成和音频处理的单元测试。
---
四、程序完成介绍
核心功能：
支持从音频文件中提取音高、节拍和时间戳，并生成简谱。
支持歌词与简谱的精确同步，确保歌词和音符的时间戳对齐。
支持高低音、时值符号和休止符的解析与生成。
2. 技术栈：
音频处理：librosa、pydub。
歌词识别：speech_recognition。
界面开发：Kivy（待实现）。
数据存储：本地临时文件（后续计划迁移到 SQLite）。
使用说明：
上传音频文件后，点击“开始分析”按钮，程序将自动生成简谱并同步歌词。
生成的简谱和歌词会显示在程序界面中，用户可以查看和编辑。
未来优化：
支持更多音频格式（如 FLAC、AAC）。
优化歌词识别算法，提高识别准确率。
增加简谱导出功能（支持 PDF、图片格式）。
---